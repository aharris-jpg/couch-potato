<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Vegas Insider — Snowstorm Couch Potato Rankings (by State)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- D3 + TopoJSON -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/topojson-client@3"></script>

  <style>
    :root{
      --ink:#0b2235;
      --bgA:#eaf4ff;
      --bgB:#fdeff3;
      --card:rgba(255,255,255,0.78);
      --border:rgba(11,34,53,0.10);
      --shadow:0 18px 46px rgba(0,0,0,0.12);
      --radius:18px;

      --mapStroke:#ffffff;
      --mapStrokeW:6.2;

      --font: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
      --mono: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono",monospace;

      --lvl1:#ff6b6b;
      --lvl2:#ffb24a;
      --lvl3:#37c28b;
      --lvl4:#4aa3ff;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:var(--font);
      color:var(--ink);
      min-height:100vh;
      padding:22px 14px 26px;
      background:
        radial-gradient(1000px 640px at 18% 15%, rgba(74,163,255,0.22), transparent 55%),
        radial-gradient(900px 620px at 82% 18%, rgba(255,107,107,0.18), transparent 56%),
        radial-gradient(900px 650px at 60% 88%, rgba(55,194,139,0.16), transparent 58%),
        linear-gradient(180deg, var(--bgA), var(--bgB));
      overflow-x:hidden;
    }

    .wrap{ max-width:1040px; margin:0 auto; }

    /* ===== Header ===== */
    .hero{
      text-align:center;
      margin-bottom:12px;
      padding:6px 0 2px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      padding:7px 12px;
      border-radius:999px;
      border:1px solid rgba(11,34,53,0.12);
      background:rgba(255,255,255,0.62);
      box-shadow:0 10px 24px rgba(0,0,0,0.06);
      font-weight:950;
      text-transform:uppercase;
      letter-spacing:0.06em;
      font-size:11px;
      color:rgba(11,34,53,0.78);
      margin-bottom:10px;
    }
    .title{
      margin:0;
      font-weight:1000;
      letter-spacing:-0.012em;
      line-height:1.02;
      font-size:clamp(30px, 4.8vw, 58px);
      color:rgba(11,34,53,0.94);
      text-shadow:0 10px 26px rgba(0,0,0,0.06);
    }
    .title .hi{
      display:inline-block;
      padding:0.06em 0.34em 0.10em;
      border-radius:14px;
      background:linear-gradient(90deg, rgba(255,107,107,0.25), rgba(255,178,74,0.22));
      box-shadow:0 10px 22px rgba(255,107,107,0.10);
    }

    /* ===== Card ===== */
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(10px);
    }
    .content{ padding:16px; }

    /* ===== Map frame ===== */
    .map-frame{
      border-radius:16px;
      border:1px solid rgba(11,34,53,0.10);
      background:rgba(255,255,255,0.72);
      overflow:hidden;
      padding:10px 10px 8px;
    }

    svg{ width:100%; height:auto; display:block; }

    .state{
      stroke:var(--mapStroke);
      stroke-width:var(--mapStrokeW);
      stroke-linejoin:round;
      stroke-linecap:round;
      cursor:pointer;
      transition:filter .12s ease, opacity .12s ease;
    }
    .state:hover{ filter: drop-shadow(0 0 10px rgba(0,0,0,0.12)); }

    .state-outline{
      fill:none;
      stroke:rgba(11,34,53,0.08);
      stroke-width:1;
      pointer-events:none;
    }

    /* ===== Tier key ===== */
    .tierbar{
      margin-top:8px;
      padding:8px 8px 6px;
      border-radius:14px;
      background:rgba(255,255,255,0.62);
      border:1px solid rgba(11,34,53,0.10);
    }
    .tierbar .bar{
      height:10px;
      border-radius:999px;
      border:1px solid rgba(11,34,53,0.14);
      background:linear-gradient(90deg,
        var(--lvl1) 0%,
        var(--lvl1) 26%,
        var(--lvl2) 26%,
        var(--lvl2) 50%,
        var(--lvl3) 50%,
        var(--lvl3) 74%,
        var(--lvl4) 74%,
        var(--lvl4) 100%
      );
    }

    /* ✅ FIX: Legend columns match bar segment widths and stay 1-row always */
    .tierbar .labels{
      display:grid;
      grid-template-columns:26fr 24fr 24fr 26fr; /* matches 26/24/24/26% */
      gap:8px 10px;
      margin-top:7px;
      font-size:11px;
      font-weight:900;
      color:rgba(11,34,53,0.72);
      align-items:start;
    }

    .tierbar .labels .item{
      display:flex;
      align-items:flex-start;
      gap:7px;
      justify-content:center; /* keeps each label centered under its segment */
      text-align:left;
    }

    .dot{
      width:8px;height:8px;border-radius:50%;
      flex:0 0 auto;
      margin-top:3px;
    }

    .legend-sub{
      font-size:10px;
      font-weight:800;
      color:rgba(11,34,53,0.55);
      line-height:1.1;
      margin-top:2px;
    }

    /* Small screens: keep alignment, just reduce text + allow wrapping inside the cell */
    @media(max-width:680px){
      .tierbar .labels{ font-size:10px; gap:6px 8px; }
      .legend-sub{ font-size:9px; }
      .tierbar .labels .item{ justify-content:flex-start; }
    }
    @media(max-width:520px){
      .tierbar .labels{ font-size:9px; }
      .legend-sub{ font-size:8px; }
    }

    /* ===== Footer ===== */
    .footer{
      margin-top:12px;
      padding:12px 16px;
      background:rgba(255,255,255,0.58);
      border-top:1px solid rgba(11,34,53,0.08);
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:16px;
      flex-wrap:nowrap;
    }
    .foot-left{ max-width:72%; }
    .source{
      font-size:11px;
      font-weight:1000;
      text-transform:uppercase;
      color:rgba(11,34,53,0.78);
      margin-bottom:4px;
    }
    .method{
      font-size:11px;
      font-weight:850;
      color:rgba(11,34,53,0.62);
      line-height:1.3;
    }
    .logo{
      height:46px;
      width:auto;
      display:block;
      filter: drop-shadow(0 10px 16px rgba(0,0,0,0.12));
      flex:0 0 auto;
    }

    @media(max-width:680px){
      .footer{ flex-wrap:wrap; }
      .foot-left{ max-width:100%; }
    }
  </style>
</head>

<body>
<div class="wrap">

  <div class="hero">
    <div class="pill">Vegas Insider • Snowstorm week</div>
    <h1 class="title"><span class="hi">Snowstorm</span> Couch Potato Rankings — by State</h1>
  </div>

  <div class="card">
    <div class="content">

      <div class="map-frame">
        <svg id="map" viewBox="0 0 975 610" role="img" aria-label="Snowstorm Couch Potato Rankings map"></svg>

        <div class="tierbar" aria-label="Tier key">
          <div class="bar" aria-hidden="true"></div>

          <div class="labels">
            <div class="item">
              <span class="dot" style="background:var(--lvl1)"></span>
              <div>
                <div>Level 1 (Ranks #1–13)</div>
                <div class="legend-sub">Most couch-prone</div>
              </div>
            </div>

            <div class="item">
              <span class="dot" style="background:var(--lvl2)"></span>
              <div>
                <div>Level 2 (Ranks #14–25)</div>
                <div class="legend-sub">Couch-leaning</div>
              </div>
            </div>

            <div class="item">
              <span class="dot" style="background:var(--lvl3)"></span>
              <div>
                <div>Level 3 (Ranks #26–37)</div>
                <div class="legend-sub">Mostly active</div>
              </div>
            </div>

            <div class="item">
              <span class="dot" style="background:var(--lvl4)"></span>
              <div>
                <div>Level 4 (Ranks #38–50)</div>
                <div class="legend-sub">Least couch-prone</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        <div class="foot-left">
          <div class="source">Source: Vegas Insider analysis</div>
          <div class="method">
            Snowstorm context: when snow and ice limit outdoor movement, routines shift indoors.
            Final Couch Potato Score combines inactivity, winter conditions, gym access, TV viewing, and sports-watching interest.
          </div>
        </div>

        <img class="logo" src="https://i.postimg.cc/XYYF4tkL/download.png" alt="Vegas Insider logo">
      </div>

    </div>
  </div>

</div>

<script>
  const tierColor = {
    1: getComputedStyle(document.documentElement).getPropertyValue("--lvl1").trim(),
    2: getComputedStyle(document.documentElement).getPropertyValue("--lvl2").trim(),
    3: getComputedStyle(document.documentElement).getPropertyValue("--lvl3").trim(),
    4: getComputedStyle(document.documentElement).getPropertyValue("--lvl4").trim()
  };

  const couchData = {
    "West Virginia":1,"Kentucky":2,"Mississippi":3,"Delaware":4,"North Dakota":5,
    "Oklahoma":6,"Louisiana":7,"Indiana":8,"Alabama":9,"Nevada":10,
    "Arkansas":11,"South Dakota":12,"Missouri":13,"Ohio":14,"South Carolina":15,
    "Wyoming":16,"Michigan":17,"Pennsylvania":18,"Tennessee":19,"Iowa":20,
    "Georgia":21,"Rhode Island":22,"Kansas":23,"Nebraska":24,"Wisconsin":25,
    "Illinois":26,"New Jersey":27,"Maine":28,"New Mexico":29,"Idaho":30,
    "Montana":31,"Maryland":32,"Arizona":33,"Florida":34,"Minnesota":35,
    "North Carolina":36,"New Hampshire":37,"Alaska":38,"Texas":39,
    "Massachusetts":40,"New York":41,"Virginia":42,"Oregon":43,
    "Connecticut":44,"Vermont":45,"Colorado":46,"Hawaii":47,
    "Washington":48,"Utah":49,"California":50
  };

  function level(r){ return r<=13?1 : r<=25?2 : r<=37?3 : 4; }

  const svg = d3.select("#map");
  const projection = d3.geoAlbersUsa().scale(1300).translate([487,305]);
  const path = d3.geoPath(projection);

  d3.json("https://cdn.jsdelivr.net/npm/us-atlas@3/states-10m.json").then(us=>{
    svg.selectAll("path")
      .data(topojson.feature(us, us.objects.states).features)
      .enter().append("path")
      .attr("class","state")
      .attr("d",path)
      .attr("fill",d=>{
        const r = couchData[d.properties.name];
        return r ? tierColor[level(r)] : "#ddd";
      });
  });
</script>

</body>
</html>
